<!DOCTYPE html>
<head>
    <meta name="viewport" id="vp" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" />
    <meta charset="utf-8" />


    <link rel="stylesheet" href="https://api.mazemap.com/js/v2.0.14/mazemap.min.css">
    <script type='text/javascript' src='https://api.mazemap.com/js/v2.0.14/mazemap.min.js'></script>

    <style>
        body { margin:0px; padding:0px; width: 100%; height:100%; }
    </style>
</head>
<body>
<div id="startLat"></div>

<div id="startLon"></div>
    <div id="map" class="mazemap"></div>

    <script>
        var map = new Mazemap.Map({
            // container id specified in the HTML
            container: 'map',

            campuses: 89,

            // initial position in lngLat format
            center: {lng: 12.521545, lat: 55.785585},

            // initial zoom
            zoom: 15,

            zLevel: 1
        });

        // Add zoom and rotation controls to the map.
        map.addControl(new Mazemap.mapboxgl.NavigationControl());
		
		var lngLat = {lng: 12.525542, lat: 55.786158}; // DTU Library
		
		var testMarker = new Mazemap.MazeMarker( {
			zLevel : 1,
			color: 'green',
			innerCircle: true,
			innerCircleColor: '#FEFEFE',
			innerCircleScale: 0.7,
			glyphColor: '#000',
			glyphSize: 20,
			glyph: 'ðŸ¤·'
		} )
		.setLngLat(lngLat)
		.addTo(map);
		
		var testMarkerPopup = new Mazemap.Popup({ closeOnClick: true, offset: [0,-40]})
			.setHTML('Concert happening here at 18:00 on 20th of September!!');
			
		testMarker.setPopup(testMarkerPopup);
		
		window.onload = function() {
			// check for Geolocation support
			if (navigator.geolocation) {
			  console.log('Geolocation is supported!');
			}
			else {
			  console.log('Geolocation is not supported for this Browser/OS.');
			}
			
			  var startPos;
			  var geoSuccess = function(position) {
			    startPos = position;
			    document.getElementById('startLat').innerHTML = startPos.coords.latitude;
			    document.getElementById('startLon').innerHTML = startPos.coords.longitude;
			    console.log(startPos);
			  };
			  navigator.geolocation.getCurrentPosition(geoSuccess);
			  console.log(startPos);
			};
		
    </script>
</body>